from machine import Pin, I2C
import OLED
import framebuf

class OLEDDisplay:
    def __init__(self, width=128, height=64, scl_pin=22, sda_pin=21, i2c_freq=400000):
        self.width = width
        self.height = height
        self.i2c = I2C(0, scl=Pin(scl_pin), sda=Pin(sda_pin), freq=i2c_freq)
        self.oled = OLED.SSD1306_I2C(width, height, self.i2c)
        self.oled.fill(0)
        self.oled.show()

    def draw_large_digit(self, digit, x, y):
        font = [
            [0x3C, 0x7E, 0xE7, 0xC3, 0xC3, 0xC3, 0xC3, 0xE7, 0x7E, 0x3C],  # 0
            [0x18, 0x38, 0x78, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x7E],  # 1
            [0x7C, 0xFE, 0xC7, 0x07, 0x0E, 0x1C, 0x38, 0x70, 0xE0, 0xFF],  # 2
            [0x7C, 0xFE, 0xC7, 0x07, 0x3E, 0x3E, 0x07, 0xC7, 0xFE, 0x7C],  # 3
            [0x0E, 0x1E, 0x3E, 0x6E, 0xCE, 0xFF, 0xFF, 0x0E, 0x0E, 0x0E],  # 4
            [0xFF, 0xFF, 0xC0, 0xFC, 0xFE, 0x07, 0x07, 0xC7, 0xFE, 0x7C],  # 5
            [0x3C, 0x7E, 0xE3, 0xC0, 0xFC, 0xFE, 0xC7, 0xC7, 0x7E, 0x3C],  # 6
            [0xFF, 0xFF, 0x07, 0x0E, 0x1C, 0x38, 0x70, 0xE0, 0xC0, 0xC0],  # 7
            [0x3C, 0x7E, 0xE7, 0xE7, 0x7E, 0x3C, 0xE7, 0xE7, 0x7E, 0x3C],  # 8
            [0x3C, 0x7E, 0xE7, 0xE7, 0x7F, 0x3F, 0x07, 0xE7, 0x7E, 0x3C],  # 9
        ]

        for row in range(10):
            bits = font[digit][row]
            for col in range(8):
                pixel = (bits >> (7 - col)) & 0x01
                self.oled.pixel(x + col, y + row, pixel)
        self.oled.show()

    def clear(self):
        self.oled.fill(0)
        self.oled.show()

# استفاده از کلاس برای نمایش اعداد بزرگ
oled_display = OLEDDisplay()

# پاک کردن صفحه نمایش
oled_display.clear()

# رسم عدد بزرگ 3 در موقعیت (10، 10)
oled_display.draw_large_digit(3, 10, 10)

# رسم عدد بزرگ 8 در موقعیت (20، 10)
oled_display.draw_large_digit(8, 20, 10)
